# app/conf.py
from datetime import timedelta

# نسبة الزكاة
ZAKAT_RATE = 0.025

# الحول بالايام (هجري ≈ 354)
ZAKAT_HAUL_DAYS = 354

# نصاب الذهب/الفضة
NISAB_GOLD_GRAMS = 85
NISAB_SILVER_GRAMS = 595

# معيار نصاب "الأموال" (اختَر GOLD أو SILVER؛ المعتمد غالباً GOLD)
NISAB_BENCHMARK_FOR_MONEY = "GOLD"

# تذكيرات قبل موعد الزكاة (أيام) — لا إشعار تأخير
ZAKAT_REMINDER_OFFSETS = [30, 15, 7, 0]

# conf.py

PRIVACY_POLICY_JSON = {
    "title": "سياسة الخصوصية لتطبيق الزكاة",
    "lang": "ar",
    "version": "1.0.0",
    "last_updated": "2025-11-01",
    "meta": {
        "app_name": "Zakati",
        "platforms": ["Android", "iOS"],
        "contact_email": "support@example.com",
        "contact_website": None,
        "jurisdiction_note": "نلتزم بالمبادئ العامة لحماية البيانات المعمول بها عالميًا، "
                             "مع مراعاة الأنظمة المحلية قدر الإمكان."
    },
    "sections": [
        {
            "id": "intro",
            "title": "مقدمة عامة",
            "body": "نحن نقدّم تطبيقًا لمساعدة المستخدم في حساب زكاة الذهب والفضة والأموال، "
                    "مع احترام خصوصيتك وحماية بياناتك الشخصية. "
                    "تهدف هذه السياسة لتوضيح كيفية جمع بياناتك واستخدامها وتخزينها وحمايتها.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "data_we_collect",
            "title": "البيانات التي نقوم بجمعها",
            "body": "نحرص على جمع أقل قدر ممكن من البيانات اللازمة لتقديم الخدمة وتحسينها.",
            "bullets": None,
            "groups": [
                {
                    "id": "account_data",
                    "title": "بيانات الحساب الأساسية",
                    "body": "تُجمع هذه البيانات عند تسجيل الحساب أو تسجيل الدخول:",
                    "bullets": [
                        "البريد الإلكتروني.",
                        "الاسم (اختياري أو كما يُدخله المستخدم).",
                        "كلمة المرور (في حال التسجيل بالبريد وكلمة المرور؛ تُخزن مشفرة).",
                        "معرّف المستخدم داخل النظام (User ID)."
                    ],
                    "fields": [
                        {"name": "email", "required": True, "type": "email"},
                        {"name": "full_name", "required": False, "type": "string"},
                        {"name": "password_hash", "required": True, "type": "hashed"},
                    ],
                    "notes": None
                },
                {
                    "id": "auth_providers",
                    "title": "تسجيل الدخول عبر مزوّدي الطرف الثالث",
                    "body": "إذا اخترت تسجيل الدخول باستخدام Google أو Apple أو Facebook "
                            "فقد نتلقّى من مزود الخدمة بعض البيانات الأساسية التي تسمح لنا بإنشاء حسابك أو ربطه.",
                    "bullets": [
                        "المعرّف الفريد لدى المزود (Sub / ID).",
                        "البريد الإلكتروني المؤكّد (إن توفر).",
                        "الاسم أو الاسم المعروض (Display Name) كما يقدمه المزود.",
                        "لا نصل إلى كلمة المرور الخاصة بحسابك لدى مزود الخدمة."
                    ],
                    "fields": None,
                    "notes": "يخضع استخدامك لخدمات تسجيل الدخول لشروط الخصوصية الخاصة بكل مزود (Google, Apple, Meta)."
                },
                {
                    "id": "usage_data",
                    "title": "بيانات الاستخدام الفنية",
                    "body": "قد نجمع بعض المعلومات التقنية بشكل تلقائي لتحسين الأداء وحل المشاكل.",
                    "bullets": [
                        "نوع الجهاز ونظام التشغيل وإصدار التطبيق.",
                        "سجلات أخطاء التطبيق (Crash Logs) والأداء.",
                        "توقيت استخدام بعض الشاشات أو الوظائف (بصورة إجمالية وغير حساسة)."
                    ],
                    "fields": None,
                    "notes": "لا نستهدف التعرف على شخصك من خلال بيانات الاستخدام، وتُستخدم هذه البيانات لأغراض تقنية وتحليلية فقط."
                },
                {
                    "id": "zakat_data",
                    "title": "بيانات الزكاة والعمليات داخل التطبيق",
                    "body": "وهي البيانات التي تدخلها لحساب ومتابعة الزكاة:",
                    "bullets": [
                        "أصول الذهب (الكمية بالجرام، نوع العيار، قيمتها التقديرية).",
                        "أصول الفضة (الكمية والقيمة).",
                        "الأموال (الرصيد بالعملات المختلفة).",
                        "المناقلات (الإضافات، السحوبات، الزكاة المدفوعة) وتواريخها.",
                        "عملة العرض التي يختارها المستخدم."
                    ],
                    "fields": None,
                    "notes": "تهدف هذه البيانات لتمكين الحساب الشرعي للزكاة وعرض التقارير للمستخدم فقط."
                }
            ],
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "how_we_use",
            "title": "كيفية استخدام البيانات",
            "body": None,
            "bullets": [
                "تقديم خدمة حساب الزكاة وتتبع الأصول وفق المنهج الشرعي المعتمد في التطبيق.",
                "عرض تنبيهات الزكاة عند قرب أوان الحول أو عند تحقق الوجوب.",
                "تحسين أداء التطبيق وتجربة المستخدم (تحليلات إجمالية وغير شخصية).",
                "التواصل معك عند الضرورة (مثل تنبيهات أمنية أو تحديثات مهمة في السياسة)."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "legal_basis",
            "title": "الأساس النظامي لاستخدام بياناتك",
            "body": "في البلدان التي تتطلب تحديد أساس قانوني لمعالجة البيانات (مثل القوانين المستوحاة من GDPR)، "
                    "نستند عادةً إلى الأسس التالية:",
            "bullets": None,
            "groups": [
                {
                    "id": "contract",
                    "title": "تنفيذ العقد",
                    "body": "معالجة البيانات ضرورية لتقديم الخدمة التي طلبتها (إنشاء الحساب، حفظ بيانات الزكاة، توليد التقارير).",
                    "bullets": None,
                    "fields": None,
                    "notes": None
                },
                {
                    "id": "legitimate_interest",
                    "title": "المصلحة المشروعة",
                    "body": "مثل تحسين أداء التطبيق، وحماية النظام من إساءة الاستخدام أو الهجمات، "
                            "مع مراعاة عدم تعارض ذلك مع حقوقك الأساسية.",
                    "bullets": None,
                    "fields": None,
                    "notes": None
                },
                {
                    "id": "consent",
                    "title": "الموافقة",
                    "body": "في بعض الحالات (مثل تفعيل تحليلات اختيارية أو إشعارات معينة)، "
                            "قد نعتمد على موافقتك الصريحة التي يمكنك سحبها في أي وقت من إعدادات التطبيق.",
                    "bullets": None,
                    "fields": None,
                    "notes": None
                }
            ],
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "retention",
            "title": "مدة الاحتفاظ بالبيانات",
            "body": None,
            "bullets": [
                "نحتفظ ببيانات حسابك ما دام حسابك نشطًا ولم تطلب حذفه.",
                "نحتفظ ببيانات الزكاة والمناقلات لتمكينك من مراجعة تاريخك الزكوي ما لم تطلب حذفها أو حذف الحساب.",
                "قد نحتفظ ببعض السجلات الفنية (Logs) لفترة محدودة لأسباب أمنية وتقنية، ثم تُحذَف أو تُزال هويتها."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "sharing",
            "title": "متى نشارك بياناتك؟",
            "body": "لا نبيع بياناتك الشخصية ولا نتاجر بها.",
            "bullets": [
                "مزوّدو الخدمات التقنية (مثل استضافة الخوادم، قواعد البيانات، التخزين السحابي) وفق اتفاقيات حماية بيانات مناسبة.",
                "في حال فرضت جهة نظامية مختصة ذلك بموجب قانون ساري المفعول، وبالقدر اللازم فقط.",
                "عند الحاجة لحماية حقوقنا القانونية أو منع إساءة استخدام الخدمة (ضمن الحدود النظامية)."
            ],
            "groups": None,
            "note": "نحرص على ألا يؤدي أي تشارك للبيانات إلى انتهاك خصوصيتك أو الكشف عن بيانات حساسة أكثر مما يلزم.",
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "security",
            "title": "حماية البيانات",
            "body": None,
            "bullets": [
                "تخزين كلمات المرور مشفّرة (Hash) ولا تُحفظ بشكل نصّي واضح.",
                "استخدام طرق اتصال آمنة (مثل HTTPS) قدر الإمكان عند تبادل البيانات.",
                "تقييد الوصول إلى قواعد البيانات على طاقم مصرح له فقط.",
                "مراجعة دورية للإعدادات الأمنية والتحديثات البرمجية."
            ],
            "groups": None,
            "note": "رغم حرصنا على الحماية، لا يمكن لأي نظام أن يضمن أمانًا مطلقًا بنسبة 100٪.",
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "international_transfers",
            "title": "نقل البيانات عبر الحدود",
            "body": "قد تُخزَّن بياناتك أو تُعالَج على خوادم خارج بلد إقامتك، "
                    "ولكننا نسعى لاختيار مزوّدي خدمات يلتزمون بمعايير معقولة لحماية البيانات.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "user_rights",
            "title": "حقوقك وخياراتك",
            "body": "وفقًا لقوانين بلدك، قد يكون لك بعض الحقوق المتعلقة ببياناتك الشخصية.",
            "bullets": [
                "الاطلاع على بعض بياناتك الشخصية وتحديثها من داخل التطبيق (مثل الاسم والبريد).",
                "طلب حذف حسابك وبياناتك المرتبطة به (مع ملاحظة أن حذفها قد يمنعك من استرجاع أي تاريخ زكوي سابق).",
                "إيقاف بعض الأذونات الاختيارية (مثل الإشعارات أو التحليلات – إن كانت مفعّلة في المستقبل)."
            ],
            "groups": None,
            "note": "يمكنك التواصل معنا عبر البريد الإلكتروني الموضح في هذه السياسة لبحث أي طلب متعلق بالبيانات.",
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "children",
            "title": "استخدام التطبيق من قبل الأطفال",
            "body": "التطبيق موجّه أساسًا للبالغين أو من يستخدمه تحت إشراف ولي الأمر. "
                    "إذا كنت تعتقد أن طفلًا قد زوّدنا ببياناته دون علم أو موافقة وليّه، يرجى التواصل معنا.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "changes",
            "title": "تحديثات على سياسة الخصوصية",
            "body": "قد نقوم بتحديث هذه السياسة من وقت لآخر. "
                    "سنحدّث تاريخ \"آخر تحديث\" في أعلى هذه الوثيقة، وقد نرسل لك إشعارًا داخل التطبيق عند إجراء تغييرات جوهرية.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "contact",
            "title": "كيفية التواصل معنا",
            "body": "لأي استفسار أو طلب يتعلق بالخصوصية أو البيانات الشخصية، يمكنك التواصل معنا عبر:",
            "bullets": [
                "البريد الإلكتروني: support@example.com",
                "أو من خلال نموذج التواصل داخل التطبيق (إن توفر)."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": "لا تُستخدم قناة التواصل هذه للفتوى الشرعية، وإنما للاستفسارات المتعلقة بالخصوصية فقط."
        }
    ]
}
