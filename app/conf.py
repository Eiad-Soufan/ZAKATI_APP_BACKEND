# app/conf.py
from datetime import timedelta

# نسبة الزكاة
ZAKAT_RATE = 0.025

# الحول بالايام (هجري ≈ 354)
ZAKAT_HAUL_DAYS = 354

# نصاب الذهب/الفضة
NISAB_GOLD_GRAMS = 85
NISAB_SILVER_GRAMS = 595

# معيار نصاب "الأموال" (اختَر GOLD أو SILVER؛ المعتمد غالباً GOLD)
NISAB_BENCHMARK_FOR_MONEY = "GOLD"

# تذكيرات قبل موعد الزكاة (أيام) — لا إشعار تأخير
ZAKAT_REMINDER_OFFSETS = [30, 15, 7, 0]

# conf.py

PRIVACY_POLICY_JSON = {
    "title": "سياسة الخصوصية لتطبيق الزكاة",
    "lang": "ar",
    "version": "1.0.0",
    "last_updated": "2025-11-01",
    "meta": {
        "app_name": "Zakati",
        "platforms": ["Android", "iOS"],
        "contact_email": "support@example.com",
        "contact_website": None,
        "jurisdiction_note": "نلتزم بالمبادئ العامة لحماية البيانات المعمول بها عالميًا، "
                             "مع مراعاة الأنظمة المحلية قدر الإمكان."
    },
    "sections": [
        {
            "id": "intro",
            "title": "مقدمة عامة",
            "body": "نحن نقدّم تطبيقًا لمساعدة المستخدم في حساب زكاة الذهب والفضة والأموال، "
                    "مع احترام خصوصيتك وحماية بياناتك الشخصية. "
                    "تهدف هذه السياسة لتوضيح كيفية جمع بياناتك واستخدامها وتخزينها وحمايتها.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "data_we_collect",
            "title": "البيانات التي نقوم بجمعها",
            "body": "نحرص على جمع أقل قدر ممكن من البيانات اللازمة لتقديم الخدمة وتحسينها.",
            "bullets": None,
            "groups": [
                {
                    "id": "account_data",
                    "title": "بيانات الحساب الأساسية",
                    "body": "تُجمع هذه البيانات عند تسجيل الحساب أو تسجيل الدخول:",
                    "bullets": [
                        "البريد الإلكتروني.",
                        "الاسم (اختياري أو كما يُدخله المستخدم).",
                        "كلمة المرور (في حال التسجيل بالبريد وكلمة المرور؛ تُخزن مشفرة).",
                        "معرّف المستخدم داخل النظام (User ID)."
                    ],
                    "fields": [
                        {"name": "email", "required": True, "type": "email"},
                        {"name": "full_name", "required": False, "type": "string"},
                        {"name": "password_hash", "required": True, "type": "hashed"},
                    ],
                    "notes": None
                },
                {
                    "id": "auth_providers",
                    "title": "تسجيل الدخول عبر مزوّدي الطرف الثالث",
                    "body": "إذا اخترت تسجيل الدخول باستخدام Google أو Apple أو Facebook "
                            "فقد نتلقّى من مزود الخدمة بعض البيانات الأساسية التي تسمح لنا بإنشاء حسابك أو ربطه.",
                    "bullets": [
                        "المعرّف الفريد لدى المزود (Sub / ID).",
                        "البريد الإلكتروني المؤكّد (إن توفر).",
                        "الاسم أو الاسم المعروض (Display Name) كما يقدمه المزود.",
                        "لا نصل إلى كلمة المرور الخاصة بحسابك لدى مزود الخدمة."
                    ],
                    "fields": None,
                    "notes": "يخضع استخدامك لخدمات تسجيل الدخول لشروط الخصوصية الخاصة بكل مزود (Google, Apple, Meta)."
                },
                {
                    "id": "usage_data",
                    "title": "بيانات الاستخدام الفنية",
                    "body": "قد نجمع بعض المعلومات التقنية بشكل تلقائي لتحسين الأداء وحل المشاكل.",
                    "bullets": [
                        "نوع الجهاز ونظام التشغيل وإصدار التطبيق.",
                        "سجلات أخطاء التطبيق (Crash Logs) والأداء.",
                        "توقيت استخدام بعض الشاشات أو الوظائف (بصورة إجمالية وغير حساسة)."
                    ],
                    "fields": None,
                    "notes": "لا نستهدف التعرف على شخصك من خلال بيانات الاستخدام، وتُستخدم هذه البيانات لأغراض تقنية وتحليلية فقط."
                },
                {
                    "id": "zakat_data",
                    "title": "بيانات الزكاة والعمليات داخل التطبيق",
                    "body": "وهي البيانات التي تدخلها لحساب ومتابعة الزكاة:",
                    "bullets": [
                        "أصول الذهب (الكمية بالجرام، نوع العيار، قيمتها التقديرية).",
                        "أصول الفضة (الكمية والقيمة).",
                        "الأموال (الرصيد بالعملات المختلفة).",
                        "المناقلات (الإضافات، السحوبات، الزكاة المدفوعة) وتواريخها.",
                        "عملة العرض التي يختارها المستخدم."
                    ],
                    "fields": None,
                    "notes": "تهدف هذه البيانات لتمكين الحساب الشرعي للزكاة وعرض التقارير للمستخدم فقط."
                }
            ],
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "how_we_use",
            "title": "كيفية استخدام البيانات",
            "body": None,
            "bullets": [
                "تقديم خدمة حساب الزكاة وتتبع الأصول وفق المنهج الشرعي المعتمد في التطبيق.",
                "عرض تنبيهات الزكاة عند قرب أوان الحول أو عند تحقق الوجوب.",
                "تحسين أداء التطبيق وتجربة المستخدم (تحليلات إجمالية وغير شخصية).",
                "التواصل معك عند الضرورة (مثل تنبيهات أمنية أو تحديثات مهمة في السياسة)."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "legal_basis",
            "title": "الأساس النظامي لاستخدام بياناتك",
            "body": "في البلدان التي تتطلب تحديد أساس قانوني لمعالجة البيانات (مثل القوانين المستوحاة من GDPR)، "
                    "نستند عادةً إلى الأسس التالية:",
            "bullets": None,
            "groups": [
                {
                    "id": "contract",
                    "title": "تنفيذ العقد",
                    "body": "معالجة البيانات ضرورية لتقديم الخدمة التي طلبتها (إنشاء الحساب، حفظ بيانات الزكاة، توليد التقارير).",
                    "bullets": None,
                    "fields": None,
                    "notes": None
                },
                {
                    "id": "legitimate_interest",
                    "title": "المصلحة المشروعة",
                    "body": "مثل تحسين أداء التطبيق، وحماية النظام من إساءة الاستخدام أو الهجمات، "
                            "مع مراعاة عدم تعارض ذلك مع حقوقك الأساسية.",
                    "bullets": None,
                    "fields": None,
                    "notes": None
                },
                {
                    "id": "consent",
                    "title": "الموافقة",
                    "body": "في بعض الحالات (مثل تفعيل تحليلات اختيارية أو إشعارات معينة)، "
                            "قد نعتمد على موافقتك الصريحة التي يمكنك سحبها في أي وقت من إعدادات التطبيق.",
                    "bullets": None,
                    "fields": None,
                    "notes": None
                }
            ],
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "retention",
            "title": "مدة الاحتفاظ بالبيانات",
            "body": None,
            "bullets": [
                "نحتفظ ببيانات حسابك ما دام حسابك نشطًا ولم تطلب حذفه.",
                "نحتفظ ببيانات الزكاة والمناقلات لتمكينك من مراجعة تاريخك الزكوي ما لم تطلب حذفها أو حذف الحساب.",
                "قد نحتفظ ببعض السجلات الفنية (Logs) لفترة محدودة لأسباب أمنية وتقنية، ثم تُحذَف أو تُزال هويتها."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "sharing",
            "title": "متى نشارك بياناتك؟",
            "body": "لا نبيع بياناتك الشخصية ولا نتاجر بها.",
            "bullets": [
                "مزوّدو الخدمات التقنية (مثل استضافة الخوادم، قواعد البيانات، التخزين السحابي) وفق اتفاقيات حماية بيانات مناسبة.",
                "في حال فرضت جهة نظامية مختصة ذلك بموجب قانون ساري المفعول، وبالقدر اللازم فقط.",
                "عند الحاجة لحماية حقوقنا القانونية أو منع إساءة استخدام الخدمة (ضمن الحدود النظامية)."
            ],
            "groups": None,
            "note": "نحرص على ألا يؤدي أي تشارك للبيانات إلى انتهاك خصوصيتك أو الكشف عن بيانات حساسة أكثر مما يلزم.",
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "security",
            "title": "حماية البيانات",
            "body": None,
            "bullets": [
                "تخزين كلمات المرور مشفّرة (Hash) ولا تُحفظ بشكل نصّي واضح.",
                "استخدام طرق اتصال آمنة (مثل HTTPS) قدر الإمكان عند تبادل البيانات.",
                "تقييد الوصول إلى قواعد البيانات على طاقم مصرح له فقط.",
                "مراجعة دورية للإعدادات الأمنية والتحديثات البرمجية."
            ],
            "groups": None,
            "note": "رغم حرصنا على الحماية، لا يمكن لأي نظام أن يضمن أمانًا مطلقًا بنسبة 100٪.",
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "international_transfers",
            "title": "نقل البيانات عبر الحدود",
            "body": "قد تُخزَّن بياناتك أو تُعالَج على خوادم خارج بلد إقامتك، "
                    "ولكننا نسعى لاختيار مزوّدي خدمات يلتزمون بمعايير معقولة لحماية البيانات.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "user_rights",
            "title": "حقوقك وخياراتك",
            "body": "وفقًا لقوانين بلدك، قد يكون لك بعض الحقوق المتعلقة ببياناتك الشخصية.",
            "bullets": [
                "الاطلاع على بعض بياناتك الشخصية وتحديثها من داخل التطبيق (مثل الاسم والبريد).",
                "طلب حذف حسابك وبياناتك المرتبطة به (مع ملاحظة أن حذفها قد يمنعك من استرجاع أي تاريخ زكوي سابق).",
                "إيقاف بعض الأذونات الاختيارية (مثل الإشعارات أو التحليلات – إن كانت مفعّلة في المستقبل)."
            ],
            "groups": None,
            "note": "يمكنك التواصل معنا عبر البريد الإلكتروني الموضح في هذه السياسة لبحث أي طلب متعلق بالبيانات.",
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "children",
            "title": "استخدام التطبيق من قبل الأطفال",
            "body": "التطبيق موجّه أساسًا للبالغين أو من يستخدمه تحت إشراف ولي الأمر. "
                    "إذا كنت تعتقد أن طفلًا قد زوّدنا ببياناته دون علم أو موافقة وليّه، يرجى التواصل معنا.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "changes",
            "title": "تحديثات على سياسة الخصوصية",
            "body": "قد نقوم بتحديث هذه السياسة من وقت لآخر. "
                    "سنحدّث تاريخ \"آخر تحديث\" في أعلى هذه الوثيقة، وقد نرسل لك إشعارًا داخل التطبيق عند إجراء تغييرات جوهرية.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "contact",
            "title": "كيفية التواصل معنا",
            "body": "لأي استفسار أو طلب يتعلق بالخصوصية أو البيانات الشخصية، يمكنك التواصل معنا عبر:",
            "bullets": [
                "البريد الإلكتروني: support@example.com",
                "أو من خلال نموذج التواصل داخل التطبيق (إن توفر)."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": "لا تُستخدم قناة التواصل هذه للفتوى الشرعية، وإنما للاستفسارات المتعلقة بالخصوصية فقط."
        }
    ]
}




# conf.py

TERMS_OF_USE_JSON = {
    "title": "شروط وسياسات استخدام تطبيق الزكاة",
    "lang": "ar",
    "version": "1.0.0",
    "last_updated": "2025-11-01",
    "meta": {
        "app_name": "Zakati",
        "platforms": ["Android", "iOS"],
        "contact_email": "support@example.com",
        "contact_website": None,
        "jurisdiction_note": "يُقصد بهذه الشروط أن تكون عامة قدر الإمكان، مع مراعاة القوانين المحلية "
                             "في بلد المستخدم بقدر الاستطاعة دون تعارض مع الثوابت الشرعية."
    },
    "sections": [
        {
            "id": "intro",
            "title": "مقدمة",
            "body": "ترحب بك هذه الشروط في تطبيق الزكاة، وهي اتفاقية استخدام بينك وبين الجهة المطوِّرة للتطبيق. "
                    "باستخدامك للتطبيق، فإنك تقرّ بأنك قرأت هذه الشروط وفهمتها ووافقت على الالتزام بها.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "acceptance",
            "title": "الموافقة على الشروط",
            "body": None,
            "bullets": [
                "استخدام التطبيق بأي صورة (تسجيل حساب، تسجيل دخول، إدخال بيانات) يعني قبولك الصريح لهذه الشروط.",
                "إذا لم توافق على أي جزء من هذه الشروط، يُرجى التوقف عن استخدام التطبيق فورًا.",
                "يجوز لنا تحديث الشروط من حين لآخر، ويُعتبر استمرارك في استخدام التطبيق بعد التحديث موافقةً على الشروط بصيغتها الجديدة."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "eligibility",
            "title": "أهلية الاستخدام",
            "body": None,
            "bullets": [
                "التطبيق موجّه للمستخدمين البالغين القادرين على التعاقد الشرعي والنظامي في بلدهم.",
                "إذا كنت تستخدم التطبيق نيابةً عن جهة أو مؤسسة، فأنت تقرّ بأن لديك الصلاحية النظامية لتمثيلها وقبول هذه الشروط نيابةً عنها.",
                "يمكن استخدام التطبيق من قِبل من هم دون ذلك تحت إشراف ولي الأمر وتحمله للمسؤولية."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "scope",
            "title": "نطاق الخدمة وطبيعتها",
            "body": None,
            "bullets": [
                "يوفر التطبيق أدوات لحساب ومتابعة زكاة الذهب والفضة والأموال وفق منهج فقهي سني مبسط.",
                "التطبيق يُقدّم خدمة مساعدة وتنظيم ولا يُعدّ بديلًا عن الاستشارة الشرعية المباشرة من أهل العلم الموثوقين.",
                "الحسابات والنتائج تعتمد على البيانات التي تُدخلها أنت، وعلى الأسعار والمعلومات المتاحة، وقد تختلف الفتوى في حالات خاصة."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": "استخدام التطبيق لا يغني عن الرجوع إلى العلماء في المسائل الخاصة أو المعقدة."
        },
        {
            "id": "not_fatwa",
            "title": "عدم اعتبار التطبيق جهة فتوى",
            "body": "رغم الحرص على الانضباط بالمنهج السني والمراجع المعتبرة، إلا أن التطبيق ليس جهة إفتاء شرعي.",
            "bullets": [
                "لا يُعتبر ما يقدّمه التطبيق فتوى شخصية ملزِمة في حقك.",
                "في الحالات الخاصة أو المتنازع فيها فقهيًا، ننصحك بالرجوع إلى عالم موثوق وشرح وضعك بالتفصيل.",
                "أي اعتماد كامل على نتائج التطبيق دون مراجعة في الحالات الخاصة هو على مسؤوليتك الشخصية."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "license",
            "title": "ترخيص الاستخدام",
            "body": None,
            "bullets": [
                "يُمنح لك حق غير حصري وغير قابل للتحويل لاستخدام التطبيق لأغراضك الشخصية فقط.",
                "لا يحق لك إعادة بيع التطبيق أو تأجيره أو منحه كخدمة مستقلة للغير دون إذن كتابي صريح.",
                "محتوى التطبيق (الكود، التصميم، النصوص) مملوك للجهة المطوِّرة أو المرخِّصين لها، ومحمي بموجب حقوق الملكية الفكرية."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "user_responsibilities",
            "title": "مسؤوليات المستخدم",
            "body": None,
            "bullets": [
                "تلتزم بإدخال بيانات صحيحة ودقيقة قدر الإمكان؛ فدقة النتائج تعتمد على دقة مدخلاتك.",
                "تتحمل مسؤولية الحفاظ على سرية بيانات الدخول وعدم مشاركتها مع أي طرف غير مخوَّل.",
                "تقرّ بعدم استخدام التطبيق في أي نشاط مخالف للشريعة الإسلامية أو القوانين المحلية.",
                "تقرّ بعدم محاولة اختراق النظام أو التلاعب به أو إساءة استخدامه بأي شكل."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "account_security",
            "title": "أمان الحساب وكلمة المرور",
            "body": None,
            "bullets": [
                "إذا سجّلت عبر البريد وكلمة المرور، فأنت مسؤول عن اختيار كلمة مرور قوية وعدم مشاركتها.",
                "إذا استخدمت مزوّدي تسجيل الدخول (Google، Apple، Facebook)، فستظل مسؤولًا عن حماية حسابك لديهم.",
                "يُرجى إبلاغنا فورًا عند الاشتباه بأي دخول غير مصرح به إلى حسابك."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "zakat_amounts",
            "title": "حول مبالغ الزكاة المُحتسبة",
            "body": "المبالغ التي يعرضها التطبيق هي تقديرات مبنية على منهج حسابي وبيانات الأسعار المتوفرة.",
            "bullets": [
                "قد تختلف الأسعار الفعلية للذهب والفضة والعملات عن الأسعار المستخدمة في التطبيق في لحظة الحساب.",
                "المستخدم هو صاحب القرار النهائي في مقدار الزكاة التي يخرجها، ويمكنه الزيادة احتياطًا أو استشارة أهل العلم.",
                "لا يتحمل التطبيق أو مطوِّروه أي مسؤولية شرعية عن تقصير في الزكاة ناتج عن بيانات خاطئة أو ناقصة أدخلها المستخدم."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": "التطبيق أداة معاونة، وليست مرجعًا وحيدًا للإلزام الشرعي."
        },
        {
            "id": "third_parties",
            "title": "الخدمات والروابط الخارجية",
            "body": None,
            "bullets": [
                "قد يعتمد التطبيق على خدمات خارجية (مثل مزودي أسعار الصرف أو المعادن) لتحديث الأسعار.",
                "لا نضمن دقة أو استمرارية هذه الخدمات، وقد تؤثر أي أخطاء أو انقطاعات فيها على النتائج.",
                "قد يحتوي التطبيق مستقبلاً على روابط لمواقع أو محتوى خارجي؛ استخدامك لها يكون على مسؤوليتك الخاصة."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "changes_to_service",
            "title": "التعديلات على التطبيق أو إيقافه",
            "body": None,
            "bullets": [
                "نحتفظ بالحق في تعديل وظائف التطبيق أو إيقاف بعض الخصائص أو إضافة خصائص جديدة في أي وقت.",
                "قد نوقف التطبيق مؤقتًا للصيانة أو التحديثات، مع محاولة تقليل الانقطاع قدر الإمكان.",
                "يجوز لنا إيقاف الخدمة نهائيًا أو نقل إدارتها إلى جهة أخرى مع إشعار المستخدمين قدر المستطاع."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "liability",
            "title": "حدود المسؤولية",
            "body": None,
            "bullets": [
                "يُقدَّم التطبيق \"كما هو\" (AS IS) دون أي ضمانات صريحة أو ضمنية بخصوص خلوّه من الأخطاء أو استمراريته بنسبة 100٪.",
                "لا نتحمل مسؤولية أي خسارة مادية أو معنوية مباشرة أو غير مباشرة ناتجة عن استخدام التطبيق أو الاعتماد عليه، "
                "في الحدود التي يجيزها القانون.",
                "يبقى التكليف الشرعي في ذمة المستخدم، وعليه تحرّي الدقة واستشارة أهل العلم عند الحاجة."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "termination",
            "title": "إيقاف أو إنهاء استخدامك للتطبيق",
            "body": None,
            "bullets": [
                "يجوز لنا إنهاء أو تعليق وصولك إلى التطبيق في حال مخالفتك لهذه الشروط أو إساءة استخدامك للخدمة.",
                "يمكنك في أي وقت التوقف عن استخدام التطبيق وطلب حذف حسابك وبياناتك وفق سياسة الخصوصية.",
                "قد نحتفظ ببعض السجلات لمدد محددة لأغراض قانونية أو أمنية وفق ما تسمح به الأنظمة."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        },
        {
            "id": "law",
            "title": "القانون الواجب التطبيق وحل النزاعات",
            "body": "تُصاغ هذه الشروط بطريقة عامة لتتلاءم مع تعدد البلدان قدر الإمكان، "
                    "ومع ذلك، يخضع تفسيرها وتطبيقها في النهاية للقوانين السارية في بلد الجهة المشغِّلة للتطبيق، "
                    "دون إخلال بما تقرره الأنظمة المحلية الإلزامية في بلد المستخدم.",
            "bullets": None,
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": "أي تعارض محتمل بين هذه الشروط وأحكام الشريعة الإسلامية يُقدّم فيه الحكم الشرعي على الصياغات التقنية."
        },
        {
            "id": "contact",
            "title": "التواصل والاستفسارات",
            "body": "لأي استفسار حول هذه الشروط أو ملاحظات على استخدام التطبيق، يمكنك التواصل معنا عبر:",
            "bullets": [
                "البريد الإلكتروني: support@example.com",
                "أو أي قناة تواصل أخرى مذكورة داخل التطبيق."
            ],
            "groups": None,
            "note": None,
            "legal": None,
            "disclaimer": None
        }
    ]
}



